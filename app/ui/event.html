<template name="Event">
  <section id="Event" class="body">
    <div>
      <nav class="menu">
        {{pageLink name="show" value="Results" template="Event.Show" search="type=results"}}
        {{pageLink name="show" value="Start lists" template="Event.Show" search="type=startlists"}}
        {{pageLink class="adminAccess link" name="register" value="Registrations" template="Event.Register"}}
        {{pageLink class="adminAccess link" name="edit" value="Edit event" template="Event.Edit"}}
        {{pageLink class="adminAccess link" name="edit" value="Upload registrations" template="Event.RegUpload"}}
     </nav>
      <section class="body">
      </section>
    </div>
  </section>
  <template name="Index">
    <div>
      <section class="tabbed list">
        <div class="tabNames">
          <button class="tab" name="event" type="button" {{selectedTab "event"}}>Events</button>
          <button class="tab" name="series" type="button" {{selectedTab "series"}}>Series</button>
        </div>
        <div class="tabBody">
          <nav>
            {{addLink}}
          </nav>
          <table class="select">
            <thead>
              <tr>
                <th>Name</th><th>Start Date</th>
              </tr>
            </thead>
            <tbody>
              {{each "list" template="Row"}}
            </tbody>
            <template name="Row">
              <tr class="{{classes}}">
                <td>{{name}}</td><td>{{date}}</td>
              </tr>
            </template>
          </table>
        </div>
      </section>
    </div>
  </template>
  <template name="Show">
    <section id="Show">
      <div>
        <h1>{{name}} - Category {{listType}}</h1>
        {{eachCategory}}

        {{>Action ""}}
        <template name="Action">
          <div class="action">
            {{content}}
          </div>
        </template>
        {{pageLink name="teamResults" value="Team results" template="Event.teamResults"}}
      </div>
    </section>
  </template>

  <template name="CatList">
    <tr id="{{catID}}" class="{{type}}">
      <td><span class="select"></span></td>
      <td>{{pageLink value=name template="Event.Category" append=_id search=listType}}</td>
      {{heats}}
    </tr>
  </template>
  <template name="Add">
    <form id="AddEvent">
      <h1>Add new event</h1>
      {{> /Event.Form}}
      <fieldset class="actions">
        <button type="submit" name="create">Create</button>
        <button type="button" name="cancel">Cancel</button>
      </fieldset>
    </form>
  </template>

  <template name="AddSeries">
    <form id="AddSeries">
      <h1>Add new series</h1>
      {{> /Event.SeriesForm}}
      <fieldset class="actions">
        <button type="submit" name="create">Create</button>
        <button type="button" name="cancel">Cancel</button>
      </fieldset>
    </form>
  </template>

  <template name="Edit">
    <div id="EditEvent">
      <h1>Edit {{name}}</h1>
      <form>
        {{> /Event.Form}}
        <fieldset class="actions">
          <button type="submit" name="update">Save</button>
          <button type="button" name="delete">Delete</button>
          <button type="button" name="cancel">Cancel</button>
        </fieldset>
      </form>

      <div class="categories">
        <h1>Category formats</h1>
        {{each "categories" template="Cat"}}
        <template name="Cat">
          <label>
            <span class="name">{{name}}</span>
            <input name="changeFormat" value="{{eventFormat}}">
            <inlinehelp>
              <info></info>
              <popup>{{> /Help.HeatFormatLead}}{{> /Help.HeatFormatBoulder}}</popup>
            </inlinehelp>
            <div class="desc">
              {{describeFormat}}
            </div>
          </label>
        </template>
      </div>
    </div>
  </template>

  <template name="ConfirmDelete">
    <div>
      <h1>Delete {{name}}?</h1>
      <span>Are you sure you want to delete this event?</span>
    </div>
  </template>

  <template name="Form">
    <fieldset class="fields">
      {{labelField "name"}}
      {{labelField "date" placeholder="yyyy-mm-dd"}}
      <label><span class="name">Select team types for this event</span></label>
      <ul class="teamTypeList ui-ul">
        {{each "teamTypes" template="TeamType"}}
        <template name="TeamType">
          <li {{checked}}>
            <button class="check" type="button"></button>
            <span class="name">{{name}}</span>
          </li>
        </template>
      </ul>
      {{labelField "closed" type="onOff" label="Event state" onLabel="closed" offLabel="open"}}
    </fieldset>
  </template>

  <template name="SeriesForm">
    <fieldset class="fields">
      {{labelField "name"}}
      {{labelField "date" placeholder="yyyy-mm-dd"}}
      <label><span class="name">Select team types for this event</span></label>
      <ul class="teamTypeList ui-ul">
        {{each "teamTypes" template="../Form.TeamType"}}
      </ul>
      {{labelField "closed" type="onOff" label="Event state" onLabel="closed" offLabel="open"}}
    </fieldset>
  </template>
</template>
